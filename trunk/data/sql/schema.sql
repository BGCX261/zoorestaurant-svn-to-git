CREATE TABLE producto (id BIGINT AUTO_INCREMENT, codigo VARCHAR(30) NOT NULL, nombre VARCHAR(255) NOT NULL, descripcion VARCHAR(255), precio DOUBLE NOT NULL, id_restaurant BIGINT NOT NULL, type VARCHAR(255), capacidad VARCHAR(10), INDEX id_restaurant_idx (id_restaurant), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE caja (id BIGINT AUTO_INCREMENT, id_factura BIGINT, fecha_abierta DATETIME, fecha_cerrada DATETIME, id_estado BIGINT, INDEX id_estado_idx (id_estado), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE detalle (id BIGINT AUTO_INCREMENT, id_producto BIGINT, cantidad BIGINT DEFAULT '1', id_pedido BIGINT, INDEX id_producto_idx (id_producto), INDEX id_pedido_idx (id_pedido), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE estado_caja (id BIGINT AUTO_INCREMENT, codigo VARCHAR(30) NOT NULL, nombre VARCHAR(100) NOT NULL, id_restaurant BIGINT NOT NULL, INDEX id_restaurant_idx (id_restaurant), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE estado_mesa (id BIGINT AUTO_INCREMENT, codigo VARCHAR(30) NOT NULL, nombre VARCHAR(100) NOT NULL, id_restaurant BIGINT NOT NULL, INDEX id_restaurant_idx (id_restaurant), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE estado_pedido (id BIGINT AUTO_INCREMENT, codigo VARCHAR(30) NOT NULL, nombre VARCHAR(100) NOT NULL, id_restaurant BIGINT NOT NULL, INDEX id_restaurant_idx (id_restaurant), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE factura (id BIGINT AUTO_INCREMENT, numero VARCHAR(255) NOT NULL, propina DOUBLE, fecha DATETIME, id_mesa BIGINT NOT NULL, id_caja BIGINT NOT NULL, total DOUBLE, INDEX id_mesa_idx (id_mesa), INDEX id_caja_idx (id_caja), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE mesa (id BIGINT AUTO_INCREMENT, numero BIGINT, id_estado BIGINT, id_mozo BIGINT, id_pedido BIGINT, fecha_abierta DATETIME, fecha_cerrada DATETIME, id_restaurant BIGINT NOT NULL, INDEX id_estado_idx (id_estado), INDEX id_mozo_idx (id_mozo), INDEX id_pedido_idx (id_pedido), INDEX id_restaurant_idx (id_restaurant), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE mozo (id BIGINT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, apellido VARCHAR(255) NOT NULL, id_restaurant BIGINT NOT NULL, INDEX id_restaurant_idx (id_restaurant), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE pedido (id BIGINT AUTO_INCREMENT, numero BIGINT, fecha DATETIME, id_estado BIGINT, INDEX id_estado_idx (id_estado), PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE prueba (id BIGINT NOT NULL, name VARCHAR(255) NOT NULL UNIQUE) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE restaurant (id BIGINT AUTO_INCREMENT, nombre VARCHAR(255) NOT NULL, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
CREATE TABLE stock (id BIGINT AUTO_INCREMENT, codigo VARCHAR(30) NOT NULL, cantidad BIGINT, PRIMARY KEY(id)) DEFAULT CHARACTER SET utf8 COLLATE utf8_unicode_ci ENGINE = InnoDB;
ALTER TABLE producto ADD FOREIGN KEY (id_restaurant) REFERENCES restaurant(id);
ALTER TABLE caja ADD FOREIGN KEY (id_estado) REFERENCES estado_caja(id);
ALTER TABLE detalle ADD FOREIGN KEY (id_producto) REFERENCES producto(id);
ALTER TABLE detalle ADD FOREIGN KEY (id_pedido) REFERENCES pedido(id);
ALTER TABLE estado_caja ADD FOREIGN KEY (id_restaurant) REFERENCES restaurant(id);
ALTER TABLE estado_mesa ADD FOREIGN KEY (id_restaurant) REFERENCES restaurant(id);
ALTER TABLE estado_pedido ADD FOREIGN KEY (id_restaurant) REFERENCES restaurant(id);
ALTER TABLE factura ADD FOREIGN KEY (id_mesa) REFERENCES mesa(id);
ALTER TABLE factura ADD FOREIGN KEY (id_caja) REFERENCES caja(id);
ALTER TABLE mesa ADD FOREIGN KEY (id_restaurant) REFERENCES restaurant(id);
ALTER TABLE mesa ADD FOREIGN KEY (id_pedido) REFERENCES pedido(id);
ALTER TABLE mesa ADD FOREIGN KEY (id_mozo) REFERENCES mozo(id);
ALTER TABLE mesa ADD FOREIGN KEY (id_estado) REFERENCES estado_mesa(id);
ALTER TABLE mozo ADD FOREIGN KEY (id_restaurant) REFERENCES restaurant(id);
ALTER TABLE pedido ADD FOREIGN KEY (id_estado) REFERENCES estado_pedido(id);
